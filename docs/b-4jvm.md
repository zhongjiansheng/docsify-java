## 2.4 JVM

### 2.4.1 jdk8 之前 和之后的内存划分区别？

*JDK8* 前后的主要区别是*方法区*的划分，在之前方法区还存在，并且有JVM本身控制其大小，而在之后则取消了方法区，在直接内存中划分了一段区域用来替代方法区，叫做元数据空间，这个区域的大小受本机内存的限制。并且运行时常量池放在了堆中。

### 2.4.2 Mnior GC 和 Full GC 的区别？

* **发生位置：**Mnior 发生在新生代，而 Full GC 发生在整个堆。
* **回收速度：**Mnior 发生频繁并且速度快，而 Full 发生的次数相对较少但是速度慢。

### 2.4.3 类的回收条件？

类的回收相比于常量的回收来说更加复杂，需要以下条件：

* 该类的所有相关实例都已经被回收	
* 加载该类的 ClassLoader 已经被回收
* 加载该类的 Class 对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法

### 2.4.4 client 和 server 下的虚拟机的区别？

我们使用的HotSpot中内置了两个JIT编译器，即C1编译器和C2编译器，默认采用的是解释器和一个编辑器配合的方式进行工作。HotSpot在启动的时候会根据自身版本以及宿主机器的硬件性能自动选择运行模式，比如会检测宿主机器是否为服务器、比如J2SE会检测主机是否有至少2个CPU和至少2GB的内存。

**1、如果是，则虚拟机会以Server模式运行，该模式与C2编译器共同运行，更注重编译的质量，启动速度慢，但是运行效率高，适合用在服务器环境下，针对生产环境进行了优化**

**2、如果不是，则虚拟机会以Client模式运行，该模式与C1编译器共同运行，更注重编译的速度，启动速度快，更适合用在客户端的版本下，针对GUI进行了优化**